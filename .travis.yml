matrix:
  include:
  - language: node_js
    node_js: '12'
    addons:
        sonarcloud:
            organization: 'swsnu'
            token:
                secure: 'SQ9TCJgNll0759vQzRcz6ZzNcp9J/VFh/Zs5RsiBIlVSheQLekHM01EBCSk2LqUzFLQJ3HjMaClTSJLayJOiOmSvreoSxk/ZdD7dGJaGf1M5/KXdgnZDVMiKziQtvwI8DdTn5jmj8lDlvDB8wgiwXoDeseNlM6Ddj4z0jrNSimzEE2mMuGld+xiGTsDn1GZ9HGfHqLb89RoMPtfOeynT4lXzPsM1Q82U+Cwx86H5az+RV7T3Yt2c5Lq1NenctVuqW1QgN4solM8mBmCEUbQR0iLPTMWHSmZ6W+C61imAxtgF6wMzQjPctQowegQcWrEy0DhAlfugKF0QSptLCHwKVGMpEwDr2cCYzIAqcQ2pk628QdXHJUUbDr53c56y52UK/JlLv5+gnxwFAFNdETulfW7YGrbZ5cktCyexu6HJrr5SK7/ec0JcIhznuA5Eb8Twv6w6br7WBfL5PA7U3YFCMsh1t1cYaxDwdsSZSTW/4jsf4LEZJgBeZt/jyF6lg5KL2FqK03WfoRcQ4HoUbaRDj1CjtRWST13+pGFKqCyKD30l/33tTwCRYxU8paVKnCplnsFDahI3eIC8zYY2AVMDfb48Nz8xIeooWBJRIwpmdRBo411U2ywMhvlLQWED9pc0bVZxDFzSqjdX+qBr5Lgy9Ncqd1jfCdqV8M1MLg7iF44='
    cache:
    - yarn: true
    before_install:
    - cd frontend
    install:
    - yarn install
    script:
    - yarn lint
    - yarn test --coverage --watchAll=false
    - cd .. && sonar-scanner
  - language: python
    python: '3.8'
    addons:
        sonarcloud:
            organization: 'swsnu'
            token:
                secure: 'SQ9TCJgNll0759vQzRcz6ZzNcp9J/VFh/Zs5RsiBIlVSheQLekHM01EBCSk2LqUzFLQJ3HjMaClTSJLayJOiOmSvreoSxk/ZdD7dGJaGf1M5/KXdgnZDVMiKziQtvwI8DdTn5jmj8lDlvDB8wgiwXoDeseNlM6Ddj4z0jrNSimzEE2mMuGld+xiGTsDn1GZ9HGfHqLb89RoMPtfOeynT4lXzPsM1Q82U+Cwx86H5az+RV7T3Yt2c5Lq1NenctVuqW1QgN4solM8mBmCEUbQR0iLPTMWHSmZ6W+C61imAxtgF6wMzQjPctQowegQcWrEy0DhAlfugKF0QSptLCHwKVGMpEwDr2cCYzIAqcQ2pk628QdXHJUUbDr53c56y52UK/JlLv5+gnxwFAFNdETulfW7YGrbZ5cktCyexu6HJrr5SK7/ec0JcIhznuA5Eb8Twv6w6br7WBfL5PA7U3YFCMsh1t1cYaxDwdsSZSTW/4jsf4LEZJgBeZt/jyF6lg5KL2FqK03WfoRcQ4HoUbaRDj1CjtRWST13+pGFKqCyKD30l/33tTwCRYxU8paVKnCplnsFDahI3eIC8zYY2AVMDfb48Nz8xIeooWBJRIwpmdRBo411U2ywMhvlLQWED9pc0bVZxDFzSqjdX+qBr5Lgy9Ncqd1jfCdqV8M1MLg7iF44='
    cache:
    - pip: true
    before_install:
    - cd backend
    install:
    - pip install -r requirements.txt
    script:
    - pylint **/*.py --load-plugins pylint_django
    - coverage run --source='.' manage.py test
    - coverage xml
    - cd .. && sonar-scanner
